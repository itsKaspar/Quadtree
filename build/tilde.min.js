!function t(s,e,i){function a(o,n){if(!e[o]){if(!s[o]){var r="function"==typeof require&&require;if(!n&&r)return r(o,!0);if(h)return h(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[o]={exports:{}};s[o][0].call(l.exports,(function(t){return a(s[o][1][t]||t)}),l,l.exports,t,s,e,i)}return e[o].exports}for(var h="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,s,e){const i=t("../particlesystem/Particle.js");s.exports=class extends i{constructor(t){super(t),noStroke(),fill(color(90,200,140,200))}setWanderAngle(){void 0===this.wander&&(this.wander=random(TWO_PI))}setHome(t=this.pos){void 0===this.home&&(this.home=t)}draw(){let t=this.vel.copy();0==t.mag()&&(t=createVector(0,-1));const s=t.setMag(15),e=p5.Vector.add(this.pos,s),i=t.setMag(5).rotate(PI/2),a=p5.Vector.add(this.pos,i),h=t.rotate(-PI),o=p5.Vector.add(this.pos,h);triangle(a.x,a.y,o.x,o.y,e.x,e.y)}}},{"../particlesystem/Particle.js":11}],2:[function(t,s,e){const i=t("./Agent.js"),a=t("../particlesystem/ParticleSystem.js");s.exports=class extends a{constructor(t,s=i){super(t,s),this.safeDistance=20}avoidWalls(t=1,s=20){let e=[];for(let t=0;t<this.a.length;t++){let i=this.a[t].vel.copy(),a=this.a[t].vel.copy();this.a[t].pos.x>this.boundary.x+this.boundary.w/2-this.padding-s?i=createVector(-this.maxVel,this.a[t].vel.y):this.a[t].pos.x<this.boundary.x-this.boundary.w/2+this.padding+s&&(i=createVector(this.maxVel,this.a[t].vel.y)),this.a[t].pos.y<this.boundary.y-this.boundary.h/2+this.padding+s?a=createVector(this.a[t].vel.x,this.maxVel):this.a[t].pos.y>this.boundary.y+this.boundary.h/2-this.padding-s&&(a=createVector(this.a[t].vel.x,-this.maxVel));const h=p5.Vector.add(i,a).div(2),o=p5.Vector.sub(h,this.a[t].vel);e[t]=o}this.applyForces(e,t)}randomWalk(t=1){let s=[];for(let t of this.a)s.push(p5.Vector.random2D());this.applyForces(s,t)}wander(t=1,s=!1){let e=[];for(let t=0;t<this.a.length;t++){this.a[t].setWanderAngle();const i=25,a=.1,h=this.a[t].vel.copy().setMag(i);this.a[t].wander+=random()*a-.5*a;const o=createVector(0,-1).mult(i/4).rotate(this.a[t].wander),n=p5.Vector.add(h,o),r=p5.Vector.sub(n,this.a[t].vel);e[t]=r,s&&(noStroke(),fill(200,150),circle(h.x+this.a[t].pos.x,h.y+this.a[t].pos.y,10),noFill(),stroke(255,0,0,100),strokeWeight(1),line(h.x+this.a[t].pos.x,h.y+this.a[t].pos.y,h.x+this.a[t].pos.x+o.x,h.y+this.a[t].pos.y+o.y))}this.applyForces(e,t)}home(t=1,s=50){let e=[];for(let t=0,i=this.a.length;t<i;t++){this.a[t].setHome();let i=p5.Vector.sub(this.a[t].home,this.a[t].pos);const a=i.mag();if(i.normalize(),a<s){const t=map(a,s,0,this.maxVel,0);i.mult(t)}else i.setMag(this.maxVel);e[t]=p5.Vector.sub(i,this.a[t].vel)}this.applyForces(e,t)}repulsionExp(t=1,s=this.safeDistance,e=this){let i=[];for(let t=0,a=this.a.length;t<a;t++){let a=createVector();const h=e.data.qtree.query(this.a[t].pos.x,this.a[t].pos.y,s);for(let e=0,i=h.length;e<i;e++)if(this.a[t].pos!=h[e].pos){const i=this.a[t].pos.dist(h[e].pos),o=p5.Vector.sub(this.a[t].pos,h[e].pos).mult(exp(s-i));a.add(o)}i[t]=a}this.applyForces(i,t)}}},{"../particlesystem/ParticleSystem.js":13,"./Agent.js":1}],3:[function(t,s,e){const i=t("../autonomousagents/Agent.js");s.exports=class extends i{constructor(t){super(t)}}},{"../autonomousagents/Agent.js":1}],4:[function(t,s,e){const i=t("../autonomousagents/AgentSystem.js");t("../maths/Maths.js");s.exports=class extends i{constructor(t,s){super(t,s),this.Instance=s,this.chainDiv=t.chainDiv||20,this.chainClose=void 0===t.chainClose||t.chainClose}chainAttraction(t=1){let s=[];for(let t=0,e=this.a.length;t<e;t++){const e=this.a[maths.Maths.fixId(t-1,this.a.length)].pos,i=this.a[maths.Maths.fixId(t+1,this.a.length)].pos,a=p5.Vector.sub(maths.Maths.midpoint(e,i),this.a[t].pos),h=p5.Vector.sub(a,this.a[t].vel);s[t]=h}this.applyForces(s,t)}chainSubdivide(){let t=this.a.length-2;!0===this.chainClose&&(t=this.a.length-1);for(let s=t;s>=0;s--){const t=this.a[maths.Maths.fixId(s,this.a.length)],e=this.a[maths.Maths.fixId(s+1,this.a.length)];maths.Maths.distSq(t.pos,e.pos)>this.chainDiv**2&&splice(this.a,this.makeChild(t,e),s+1)}}makeChild(t,s){const e={pos:maths.Maths.midpoint(t.pos,s.pos)};return new this.Instance(e)}drawChainClosed(){noFill(),strokeWeight(1),stroke(this.col),beginShape();for(let t=0,s=this.a.length;t<s;t++)curveVertex(this.a[t].pos.x,this.a[t].pos.y);endShape(CLOSE)}drawChainOpen(){noFill(),strokeWeight(1),stroke(this.col),beginShape(),curveVertex(this.a[0].pos.x,this.a[0].pos.y);for(let t=0,s=this.a.length;t<s;t++)curveVertex(this.a[t].pos.x,this.a[t].pos.y);curveVertex(this.a[this.a.length-1].pos.x,this.a[this.a.length-1].pos.y),endShape()}}},{"../autonomousagents/AgentSystem.js":2,"../maths/Maths.js":8}],5:[function(t,s,e){s.exports=class{constructor(t,s,e){this.x=t,this.y=s,this.r=e}contains(t){return(t.pos.x-this.x)**2+(t.pos.y-this.y)**2<=this.r**2}intersects(t){var s=Math.abs(t.x-this.x),e=Math.abs(t.y-this.y),i=this.r,a=t.w,h=t.h;return!(s>i+a||e>i+h)&&(s<=a||e<=h||(s-a)**2+(e-h)**2<=this.r**2)}}},{}],6:[function(t,s,e){s.exports=class{constructor(t){this.pos=t.pos||createVector(width/2,height/2),noStroke(),fill(200)}draw(){circle(this.pos.x,this.pos.y,10)}debug(){noStroke(),fill(255,0,0),circle(this.pos.x,this.pos.y,10)}}},{}],7:[function(t,s,e){s.exports=class{constructor(t,s,e,i){this.x=t,this.y=s,this.w=e,this.h=i}contains(t){return t.pos.x>=this.x-this.w&&t.pos.x<=this.x+this.w&&t.pos.y>=this.y-this.h&&t.pos.y<=this.y+this.h}intersects(t){return!(t.x-t.w>this.x+this.w||t.x+t.w<this.x-this.w||t.y-t.h>this.y+this.h||t.y+t.h<this.y-this.h)}}},{}],8:[function(t,s,e){class i{static distSq(t,s,e,i){return(e-t)**2+(i-s)**2}static isPointinCircle(t,s,e,i,a){return distSq(t,s,e,i)<a**2}static isPointinSquare(){}static pointInQuad(){}static pointInSquare(){}static pointInCircle(t,s,e){const i=e*Math.sqrt(Math.random()),a=2*Math.random()*Math.PI;return{x:t+i*Math.cos(a),y:s+i*Math.sin(a)}}static midpoint(t,s){return createVector((t.x+s.x)/2,(t.y+s.y)/2)}static distSq(t,s){return(s.x-t.x)**2+(s.y-t.y)**2}static fixId(t,s){return t>=0?t%s:t<0?s+t:void 0}}"undefined"!=typeof window?window.maths={Maths:i}:s.exports={Maths:i}},{}],9:[function(t,s,e){const i=t("../../chainsystem/ChainSystem.js");s.exports=class extends i{constructor(t,s){super(t,s)}}},{"../../chainsystem/ChainSystem.js":4}],10:[function(t,s,e){const i=t("../../chainsystem/ChainNode.js");s.exports=class extends i{constructor(t){super(t)}}},{"../../chainsystem/ChainNode.js":3}],11:[function(t,s,e){const i=t("../geometry/Point.js");s.exports=class extends i{constructor(t){super(t),this.vel=t.vel||createVector(0,0),this.acc=t.acc||createVector(0,0)}}},{"../geometry/Point.js":6}],12:[function(t,s,e){const i=t("../quadtree/Quadtree.js"),a=t("./Particle.js"),h=t("../geometry/Rectangle.js");s.exports=class{constructor(t,s=a){this.spawnNb=void 0!==t.spawnNb?t.spawnNb:100,this.spawnVel=t.spawnVel||"null",this.spawnPos=t.spawnPos||"random",this.Instance=s,this.table=[],this.padding=t.padding||0;const e=this.padding,i=2*this.padding,o=width,n=height;this.boundary=new h(o/2,n/2,o,n),this.c=createVector(o/2,n/2),this.xMin=0+e,this.yMin=0+e,this.xMax=o-e,this.yMax=n-e,this.w=o-i,this.h=n-i,this.grid=t.grid||!1;const r=this.grid;if(r){const t=o/r.c-o/r.c/2,s=n/r.r-n/r.r/2;this.c=createVector(t,s),this.w=o/r.c-i,this.h=n/r.r-i,this.xMin=this.c.x-this.w/2+e,this.xMax=this.c.x+this.w/2-e,this.yMin=this.c.y-this.h/2+e,this.yMax=this.c.y+this.h/2-e,this.boundary=new h(t,s,this.w,this.h)}this.spawnNb>0&&this.spawn(this.spawnPos),this.writeQuadtree()}spawn(){switch(this.spawnPos){case"random":default:this.spawnRandom();break;case"circle":this.spawnCircle();break;case"center":this.spawnCenter()}"null"==this.spawnVel&&this.setVelNull(),"random"==this.spawnVel&&this.setVelRandom()}spawnCircle(){for(let t=0;t<this.spawnNb;t++){const s=20*Math.sin(t/this.spawnNb*TWO_PI)+this.boundary.x,e=20*Math.cos(t/this.spawnNb*TWO_PI)+this.boundary.y,i={pos:createVector(s,e)};this.table.push(new this.Instance(i))}}spawnRandom(){for(let t=0;t<this.spawnNb;t++){const t={pos:createVector(random(this.boundary.x-this.w/2,this.boundary.x+this.w/2),random(this.boundary.y-this.h/2,this.boundary.y+this.h/2))};this.table.push(new this.Instance(t))}}spawnCenter(){for(let t=0;t<this.spawnNb;t++){const t={pos:createVector(createVector(this.boundary.x,this.boundary.y))};this.table.push(new this.Instance(t))}}setVelNull(){for(let t=0,s=this.table.length;t<s;t++)this.table[t].vel=createVector(0,0)}setVelRandom(){for(let t=0,s=this.table.length;t<s;t++)this.table[t].vel=createVector(random()-.5,random()-.5)}writeQuadtree(){this.qtree=new i;for(let t=0,s=this.table.length;t<s;t++)this.qtree.insert(this.table[t])}}},{"../geometry/Rectangle.js":7,"../quadtree/Quadtree.js":14,"./Particle.js":11}],13:[function(t,s,e){const i=t("./Particle.js"),a=t("./ParticleData.js");s.exports=class{constructor(t,s=i){this.maxVel=t.maxVel||10,this.maxAcc=t.maxAcc||50,this.col=t.col||color(200),this.data=new a(t,s),this.a=this.data.table,this.c=this.data.c,this.xMin=this.data.xMin,this.yMin=this.data.yMin,this.xMax=this.data.xMax,this.yMax=this.data.yMax,this.w=this.data.w,this.h=this.data.h,this.boundary=this.data.boundary,this.padding=this.data.padding}draw(){for(let t=0,s=this.a.length;t<s;t++)this.a[t].draw()}debug(){for(let t=0,s=this.a.length;t<s;t++)this.a[t].debug()}update(){for(let t=0,s=this.a.length;t<s;t++)this.a[t].vel.add(this.a[t].acc),this.a[t].vel.limit(this.maxVel),this.a[t].pos.add(this.a[t].vel),this.a[t].acc=createVector(0,0);this.data.writeQuadtree()}applyForces(t,s=1){for(let e=0,i=this.a.length;e<i;e++)t[e].limit(this.maxAcc),t[e].mult(s),this.a[e].acc.add(t[e])}wrap(){for(let t=0,s=this.a.length;t<s;t++)this.a[t].pos.x>this.xMax&&(this.a[t].pos.x=this.xMin),this.a[t].pos.x<this.xMin&&(this.a[t].pos.x=this.xMax),this.a[t].pos.y>this.yMax&&(this.a[t].pos.y=this.yMin),this.a[t].pos.y<this.yMin&&(this.a[t].pos.y=this.yMax)}constrain(){for(let t=0,s=this.a.length;t<s;t++)this.a[t].pos.x=constrain(this.a[t].pos.x,this.xMin,this.xMax),this.a[t].pos.y=constrain(this.a[t].pos.y,this.yMin,this.yMax)}bounceWalls(t=1){for(let t=0,s=this.a.length;t<s;t++)(this.a[t].pos.x>this.boundary.x+this.boundary.w/2-this.padding||this.a[t].pos.x<this.boundary.x-this.boundary.w/2+this.padding)&&(this.a[t].vel=createVector(-this.a[t].vel.x,this.a[t].vel.y)),(this.a[t].pos.y<this.boundary.y-this.boundary.h/2+this.padding||this.a[t].pos.y>this.boundary.y+this.boundary.h/2-this.padding)&&(this.a[t].vel=createVector(this.a[t].vel.x,-this.a[t].vel.y))}flowfield(t=1){angleMode(RADIANS);let s=[];for(let t=0,e=this.a.length;t<e;t++){const e=noise(.015*this.a[t].pos.x,.015*this.a[t].pos.y,.005*frameCount),i=map(e,0,1,0,3*TWO_PI),a=p5.Vector.fromAngle(i);s[t]=p5.Vector.sub(a,this.a[t].vel)}this.applyForces(s,t)}gravity(t=1){let s=[];for(let t=0,e=this.a.length;t<e;t++)s[t]=p5.Vector.sub(p5.Vector.fromAngle(PI/2),this.a[t].vel);this.applyForces(s,t)}force(t=p5.Vector.fromAngle(-PI/2),s=1){let e=[];for(let s=0;s<this.a.length;s++)e[s]=p5.Vector.sub(t,this.a[s].vel);this.applyForces(e,s)}wind(t=1){let s=[];for(let t=0;t<this.a.length;t++){const e=noise(.015*this.a[t].pos.x,.015*this.a[t].pos.y,.005*frameCount),i=createVector(e-.5,this.a[t].vel.y);s[t]=p5.Vector.sub(i,this.a[t].vel)}this.applyForces(s,t)}}},{"./Particle.js":11,"./ParticleData.js":12}],14:[function(t,s,e){const i=t("../geometry/Rectangle.js"),a=t("../geometry/Circle.js");class h{constructor(t=new i(width/2,height/2,width,height),s=4){this.boundary=t,this.capacity=s,this.points=[],this.divided=!1}subdivide(){let t=this.boundary.x,s=this.boundary.y,e=this.boundary.w/2,a=this.boundary.h/2,o=new i(t+e,s-a,e,a);this.northeast=new h(o,this.capacity);let n=new i(t-e,s-a,e,a);this.northwest=new h(n,this.capacity);let r=new i(t+e,s+a,e,a);this.southeast=new h(r,this.capacity);let c=new i(t-e,s+a,e,a);this.southwest=new h(c,this.capacity),this.divided=!0}insert(t){return!!this.boundary.contains(t)&&(this.points.length<this.capacity?(this.points.push(t),!0):(this.divided||this.subdivide(),!!(this.northeast.insert(t)||this.northwest.insert(t)||this.southeast.insert(t)||this.southwest.insert(t))||void 0))}query(t,s,e,i=[]){const h=new a(t,s,e);if(!h.intersects(this.boundary))return i;for(let t of this.points)h.contains(t)&&i.push(t);return this.divided&&(this.northwest.query(h.x,h.y,h.r,i),this.northeast.query(h.x,h.y,h.r,i),this.southwest.query(h.x,h.y,h.r,i),this.southeast.query(h.x,h.y,h.r,i)),i}renderPoints(){for(let t of this.points)noStroke(),fill(225,100,180),circle(t.pos.x,t.pos.y,10);this.divided&&(this.northwest.renderPoints(),this.northeast.renderPoints(),this.southwest.renderPoints(),this.southeast.renderPoints())}renderQuads(){this.divided?(this.northwest.renderQuads(),this.northeast.renderQuads(),this.southwest.renderQuads(),this.southeast.renderQuads()):(rectMode(CENTER),noFill(),rect(this.boundary.x,this.boundary.y,2*this.boundary.w-1,2*this.boundary.h-1))}draw(){this.renderQuads(),this.renderPoints()}}s.exports=h},{"../geometry/Circle.js":5,"../geometry/Rectangle.js":7}],15:[function(t,s,e){const i={Maths:t("./js/maths/Maths.js"),Point:t("./js/geometry/Point.js"),Rectangle:t("./js/geometry/Rectangle.js"),Circle:t("./js/geometry/Circle.js"),Quadtree:t("./js/quadtree/Quadtree.js"),Particle:t("./js/particlesystem/Particle.js"),ParticleSystem:t("./js/particlesystem/ParticleSystem.js"),ParticleData:t("./js/particlesystem/ParticleData.js"),Agent:t("./js/autonomousagents/Agent.js"),AgentSystem:t("./js/autonomousagents/AgentSystem.js"),ChainSystem:t("./js/chainsystem/ChainSystem.js"),ChainNode:t("./js/chainsystem/ChainNode.js"),DifferentialLine:t("./js/morphogenesis/differentialgrowth/DifferentialLine.js"),DifferentialNode:t("./js/morphogenesis/differentialgrowth/DifferentialNode.js")};"undefined"!=typeof window?window.tilde=i:s.exports=i},{"./js/autonomousagents/Agent.js":1,"./js/autonomousagents/AgentSystem.js":2,"./js/chainsystem/ChainNode.js":3,"./js/chainsystem/ChainSystem.js":4,"./js/geometry/Circle.js":5,"./js/geometry/Point.js":6,"./js/geometry/Rectangle.js":7,"./js/maths/Maths.js":8,"./js/morphogenesis/differentialgrowth/DifferentialLine.js":9,"./js/morphogenesis/differentialgrowth/DifferentialNode.js":10,"./js/particlesystem/Particle.js":11,"./js/particlesystem/ParticleData.js":12,"./js/particlesystem/ParticleSystem.js":13,"./js/quadtree/Quadtree.js":14}]},{},[15]);