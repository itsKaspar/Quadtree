<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    <link rel="stylesheet" href="../css/iframe.css">
	</head>
	<body>

<div id="p5js">

<script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
<script src="../build/quadtree.min.js"></script>

<script>

class Point{
    constructor(x,y){
        this.pos = {};
        this.pos.x = x;
        this.pos.y = y;
    }
}

let qtree;
let points = [];

function setup() {
  createCanvas(600, 600);

  for (let i = 0; i < 500; i++) {
    points.push(new Point(random(0,width), random(0,height)));
  }


}

function draw() {
  background(250);

  writeQtree();
  movePoints();
  //qtree.renderPoints();
	stroke(80, 180, 40,200);
  qtree.renderQuads();
noStroke();
	for(let i = 0 ; i < points.length ; i++){
		const request = qtree.query(new quadtree.Circle(points[i].pos.x, points[i].pos.y, 10));

		if(request.length > 1){
			fill(50,180,178,200);
		}
		else{
			fill(50,100,100,200);
		}
		circle(points[i].pos.x, points[i].pos.y, 10);
	}

}

function writeQtree(){
  qtree = new quadtree.Quadtree();
  for (let i = 0; i < points.length; i++) {
      qtree.insert(points[i]);
  }
}

function movePoints(){
  for (let i = 0; i < points.length; i++) {
      points[i].pos.x += random() - 0.5;
      points[i].pos.y += random() - 0.5;
  }
}




</script>
<div>

</body>
</html>
